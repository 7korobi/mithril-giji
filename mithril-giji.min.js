/**
 mithril-giji - mithril library for 人狼議事
 @version v0.0.18
 @link https://github.com/7korobi/mithril-giji
 @license 
**/


(function(){var a,b,c,d,e;d=function(a){return a.left=window.scrollX,a.top=window.scrollY},c=function(){var a,b,c,f;if(!e.scrolling)return a={},c=0,b=function(){var b;return b={},d(b),a.top===b.top&&a.left===b.left?10<c++:(a=b,c=0,!1)},(f=function(){b()?(e.scrolling=!1,e.do_event_list(e.on.scroll_end),e["do"].resize()):window.requestAnimationFrame(f)})()},module.exports=e={do_event_list:function(a,b){var c,d,e;if(0<a.length)for(d=0,e=a.length;e>d;d++)(c=a[d])(b)},"do":{layout:function(a){return e.do_event_list(e.on.layout,a)},resize:function(a){var b;return b=document.documentElement,e["short"]=Math.min(b.clientWidth,b.clientHeight),e.width=b.clientWidth,window.innerHeight>window.innerWidth?(e.landscape=!1,e.portlate=!0):(e.landscape=!0,e.portlate=!1),e.do_event_list(e.on.resize,a)},scroll_end:c,scroll:function(a){return d(e),e.height=window.innerHeight,e.right=e.left+window.innerWidth,e.bottom=e.top+e.height,e.horizon=e.height/2,e.scrolling||e.do_event_list(e.on.scroll_start,a),e["do"].scroll_end(),e.scrolling=!0,e.do_event_list(e.on.scroll,a)},orientation:function(a){return e.orientation=a,e.compass=a.webkitCompassHeading,e.do_event_list(e.on.orientation,a)},motion:function(a){return e.accel=a.acceleration,e.gravity=a.accelerationIncludingGravity,e.rotate=a.rotationRate,e.do_event_list(e.on.motion,a)},load:function(a){return e.do_event_list(e.on.load,a),e["do"].resize(),e["do"].scroll(),e["do"].layout()}},on:{layout:[],resize:[],scroll:[],scroll_start:[],scroll_end:[],orientation:[],motion:[],load:[]},scroll:null,layout:null,mount:function(a,b){return b?e.on.load.push(function(){var c;return c=document.querySelector(a),c&&b?m.mount(c,b(c)):void 0}):void 0},top:0,horizon:0,bottom:0,left:0,right:0,height:0,width:0,"short":0,browser:{},accel:{},rotate:{},gravity:{},orientation:{},compass:0,is_tap:!1,deploy:function(){return"onorientationchange"in window?window.addEventListener("orientationchange",e["do"].scroll):window.addEventListener("resize",e["do"].scroll),window.addEventListener("scroll",e["do"].scroll),"ondeviceorientation"in window&&window.addEventListener("deviceorientation",e["do"].orientation),"ondevicemotion"in window&&window.addEventListener("devicemotion",e["do"].motion),"onhashchange"in window&&window.addEventListener("hashchange",function(a){return a.clipboardData?console.log(a):Url.popstate()}),"onpopstate"in window&&(window.addEventListener("popstate",function(a){return a.clipboardData?console.log(a):Url.popstate()}),head.browser.safari||Url.popstate()),"onmessage"in window&&window.addEventListener("message",function(a){return console.log("on message")}),"onoffline"in window&&window.addEventListener("offline",function(a){return console.log("on offline  onLine:"+navigator.onLine)}),"ononline"in window&&window.addEventListener("online",function(a){return console.log("on online  onLine:"+navigator.onLine)}),"onstorage"in window&&window.addEventListener("storage",function(a){return console.log("on storage")}),window.addEventListener("cut",function(){}),window.addEventListener("copy",function(){}),window.addEventListener("paste",function(){}),document.hidden,"onload"in window?window.addEventListener("load",e["do"].load):void 0}},window.applicationCache&&(a=function(a){var b,c;return c=a.type,b=a.timeStamp,console.log("::"+c+" - "+b)},b=function(a){var b,c,d,e,f;return f=a.type,d=a.timeStamp,b=a.lengthComputable,c=a.loaded,e=a.total,console.log("::"+f+" "+c+" / "+e+" - "+d)},applicationCache.addEventListener("checking",a),applicationCache.addEventListener("downloading",a),applicationCache.addEventListener("progress",b),applicationCache.addEventListener("cached",a),applicationCache.addEventListener("noupdate",a),applicationCache.addEventListener("updateready",a),applicationCache.addEventListener("error",a),applicationCache.addEventListener("obsolete",a))}).call(this),function(){var a,b;a=function(){function a(){}return a.prototype.initialize=function(){},a}(),b=module.exports,b.cookie=new a,b.location=new a}.call(this),function(){var a,b,c,d,e,f,g;a=function(){},f=function(a){var b,c,d,e,f;return b=a.key,d=a.oldValue,c=a.newValue,f=a.url,e=a.storageArea,a},g=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return r=a.touches,p=a.targetTouches,e=a.changedTouches,l=a.shiftKey,f=a.ctrlKey,b=a.altKey,j=a.metaKey,t=a.view,h=a.detail,s=a.type,g=a.currentTarget,o=a.target,i=a.eventPhase,c=a.bubbles,d=a.cancelable,q=a.timeStamp,k=a.preventDefault,m=a.stopImmediatePropagation,n=a.stopPropagation,a},e=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return f=a.lengthComputable,g=a.loaded,m=a.total,n=a.type,d=a.currentTarget,k=a.target,e=a.eventPhase,b=a.bubbles,c=a.cancelable,l=a.timeStamp,h=a.preventDefault,i=a.stopImmediatePropagation,j=a.stopPropagation,a},b=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return h=a.relatedTarget,n=a.view,e=a.detail,m=a.type,d=a.currentTarget,k=a.target,f=a.eventPhase,b=a.bubbles,c=a.cancelable,l=a.timeStamp,g=a.preventDefault,i=a.stopImmediatePropagation,j=a.stopPropagation,a},d=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return g=a.clientX,h=a.clientY,n=a.momentX,o=a.momentY,e=a.buttons,r=a.screenX,s=a.screenY,d=a.button,t=a.shiftKey,i=a.ctrlKey,b=a.altKey,m=a.metaKey,q=a.relatedTarget,z=a.view,k=a.detail,y=a.type,j=a.currentTarget,w=a.target,l=a.eventPhase,c=a.bubbles,f=a.cancelable,x=a.timeStamp,p=a.preventDefault,u=a.stopImmediatePropagation,v=a.stopPropagation,a},c=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return i=a.keyCode,l=a.shiftKey,e=a.ctrlKey,b=a.altKey,j=a.metaKey,r=a.view,g=a.detail,q=a.type,f=a.currentTarget,o=a.target,h=a.eventPhase,c=a.bubbles,d=a.cancelable,p=a.timeStamp,k=a.preventDefault,m=a.stopImmediatePropagation,n=a.stopPropagation,a}}.call(this),function(){var a,b;a=function(){function a(a){this.timeout=a.timeout,this.on=a.on,this.off=a.off,this["do"]=a["do"],this.fail=a.fail,null==this.timeout&&(this.timeout=500),null==this.off&&(this.off=function(){}),null==this.on&&(this.on=function(){}),null==this["do"]&&(this["do"]=function(a){return a}),null==this.fail&&(this.fail=function(){}),this.action=function(a){return function(b){return a.timer?a.fail():a.promise(b)}}(this),this.timer=null,this.off()}return a.prototype.cancel=function(){return clearTimeout(this.timer),this.timer=null,this.off()},a.prototype.promise=function(a){var b,c;return this.timer=!0,c=new Promise(function(a){return function(b,c){return a.timer=setTimeout(function(){return c(new Error("reset "+a.timeout+"ms "))},a.timeout)}}(this)),b=this["do"](new Promise(function(b){return function(c){return b.on(),c(a)}}(this))),Promise.race([b,c]).then(function(a){return function(){return clearTimeout(a.timer)}}(this))["catch"](function(a){return function(b){return a.fail()}}(this)).then(function(a){return function(){return a.timer=null,a.off()}}(this))},a.prototype.tap=function(a){return a.onclick=this.action,a.onmouseup=this.action,a.ontouchend=this.action,a},a}(),b=module.exports,b.gesture=a}.call(this),function(){var a,b,c,d;b=require("lodash"),a=function(){function a(b,c,e,f,g,h){this.box=b,this.dx=c,this.dy=e,this.absolute=null!=f?f:!1,this.duration=null!=g?g:200,null==h&&(h=++d),this.box&&(this.absolute&&(this.duration/=4),a.list[this.box.id]=this,this.box.style.zIndex=h,this.mode="show",this.from=this.hide(),this.transform(this.from),this.transition())}var e;return a.list={},a.move=function(){var b,c,d,e;d=a.list,e=[];for(b in d)c=d[b],e.push(c.translate());return e},e=function(a){var b,d,e,f;return d=this.width||this.box.offsetWidth,b=this.height||this.box.offsetHeight,this.dx?e=this.dx:(this.width=this.box.parentElement.offsetWidth,e=this.box.parentElement.offsetLeft),this.dy&&(f=this.dy),a(e,f,d,b,{top:c.top,left:c.left,width:c.width,height:c.height})},a.prototype.show=function(){return e.call(this,function(a,b,c,d,e){return 0>a&&(a+=e.width-c),0>b&&(b+=e.height-d),{x:a,y:b,w:c,h:d,win:e}})},a.prototype.hide=function(){return e.call(this,function(a,b,c,d,e){return a=-a+function(){switch(!1){case!(a>0):return-c;case!(0>a):return e.width}}(),b=-b+function(){switch(!1){case!(b>0):return-d;case!(0>b):return e.height}}(),{x:a,y:b,w:c,h:d,win:e}})},a.prototype.transform=function(a){var b,d,e;return d=a.x,e=a.y,this.width&&(this.box.style.width=this.width+"px"),this.height&&(this.box.style.height=this.height+"px"),this.absolute?(this.box.style.position="absolute",this.box.style.left=d+c.left+"px",this.box.style.top=e+c.top+"px",this.box.style.webkitTransform="",c.browser.ff&&(this.box.style.mozTransform=""),c.browser.ie&&(this.box.style.msTransform=""),c.browser.opera&&(this.box.style.oTransform=""),this.box.style.transform=""):(this.box.style.position="fixed",this.box.style.left=0,this.box.style.top=0,b="translate("+d+"px, "+e+"px)",this.box.style.webkitTransform=b,c.browser.ff&&(this.box.style.mozTransform=b),c.browser.ie&&(this.box.style.msTransform=b),c.browser.opera&&(this.box.style.oTransform=b),this.box.style.transform=b)},a.prototype.transition=function(){var a;return a=this.duration&&!this.absolute?"all "+this.duration+"ms ease-in-out 0":"",c.browser.ff&&(this.box.style.mozTransition=a),c.browser.ie&&(this.box.style.msTransition=a),c.browser.opera&&(this.box.style.oTransition=a),this.box.style.transition=a},a.prototype.translate=function(){var a;return a=this[this.mode](),b.isEqual(this.from,a)?void 0:(this.transform(a),setTimeout(function(b){return function(){return b.from=a,b.translate()}}(this),this.duration))},a}(),d=1e3,c=module.exports,c.layout=a,c.on.layout.push(a.move),c.on.scroll_end.push(a.move),c.on.resize.push(a.move)}.call(this),function(){}.call(this),function(){var a,b;a=function(){function a(){this.show_upper=!0,this.size=30,this.head=this.tail=0}var c;return a.elems={},a.go=function(c,d){var e,f,g,h;return e=a.elems[c],e&&(g=e.getBoundingClientRect(),null==d&&(d=.5*Math.min(b.horizon,g.height)),h=g.top-b.horizon+d,f=0,f||h)?window.scrollBy(f,h):void 0},c=5e3,setInterval(function(){var a;return(null!=(a=b.scroll)?a.center:void 0)?b.scroll.tick(b.scroll.center,c/1e3):void 0},c),a.capture=function(){var c,d,e;return c=a.view(),e=b.scroll,null!=e&&null!=e.list&&(d=e.view(),d!==e.prop())?e.prop(d):void 0},a.view=function(){var c,d,e,f,g,h,i,j;i=null,g=a.elems;for(e in g)c=g[e],d=c.vision.id,f=c.getBoundingClientRect(),j=c.vision,j.top=f.top,j.btm=f.bottom,c.vision.id===e&&f.height&&f.width?!i&&j.top<(h=b.horizon)&&h<j.btm&&(i=d):delete a.elems[e];return i},a.prototype.rescroll=function(b){return this.prop=b,window.requestAnimationFrame(function(b){return function(){return a.go(b.prop())}}(this))},a.prototype.tick=function(a){return console.log(a)},a.prototype.view=function(){var c,d,e,f,g,h,i,j,k,l,n;for(i=this.pager_elem.getBoundingClientRect(),this.pager_top=i.top,j=this.list,f=d=0,g=j.length;g>d;f=++d)h=j[f],e=h._id,(c=a.elems[e])&&(n=c.vision,!this.adjust&&this.pager_top<(k=b.horizon)&&k<n.btm&&(n.offset=Math.max(1,b.horizon-n.top),this.adjust=n));return m.startComputation(),window.requestAnimationFrame(function(){return m.endComputation()}),null!=(l=this.adjust)?l.id:void 0},a.prototype.pager=function(a,c,d){var e,f,g,h,i,j,k,l,n,o,p,q,r,s;return this.list=c,(null!=(l=this.list)?l.length:void 0)?(q=0,f=this.list.length-1,null!=this.pager_elem&&(k=this.pager_elem.getBoundingClientRect(),n=b.height-k.bottom,p=0<k.top,o=n>0),g=_.findIndex(this.list,{_id:"function"==typeof this.prop?this.prop():void 0}),0>g&&(g=function(){if(this.past_list===this.list)switch(!1){case!p:return this.head;case!o:return this.tail;default:return this.head}else switch(!1){case!p:return q;case!o:return f;default:return q}}.call(this)),this.past_list=this.list,this.center=this.list[g],this.tail=Math.min(f,_.ceil(g+this.size,-1)),this.head=Math.max(q,g-this.size),j=function(a){return function(c,d,e){var f,g,h,i;return a.pager_elem=c,k=a.pager_elem.getBoundingClientRect(),a.show_under=k.bottom<b.horizon,a.show_upper=b.horizon<k.top,f=k.height/(1+a.tail-a.head),i=3*b.height/f,a.size<i&&console.log("!alert! scroll spy size "+a.size+" < "+i),h=k.bottom+b.top,g=h-a.elem_bottom,a.show_under&&g&&!a.prop()&&b.bottom<document.height&&window.scrollBy(0,g),a.elem_bottom=h}}(this),s=function(){var a,b,c,f,g;for(c=this.list.slice(this.head,+this.tail+1||9e9),g=[],a=0,b=c.length;b>a;a++){i=c[a],r=d(i),f=this.mark(i._id);for(h in f)e=f[h],r.attrs[h]=e;g.push(r)}return g}.call(this),m(a,{config:j},s)):m(a,{config:function(a){return function(b){a.pager_elem=b}}(this)})},a.prototype.mark=function(b){return{config:function(c){return function(d,e,f){var g;if(a.elems[b]=d,d.vision={id:b},c.adjust){if(b===c.adjust.id)return g=c.adjust.offset,c.adjust=null,a.go(b,g)}else if(!e&&b===c.prop())return window.requestAnimationFrame(function(){return a.go(b)})}}(this)}},a}(),b=module.exports,b.scroll=new a,b.on.scroll_end.push(function(){return a.capture()})}.call(this);
//# sourceMappingURL=mithril-giji.min.js.map