/**
 mithril-giji - mithril library for 人狼議事
 @version v0.0.8
 @link https://github.com/7korobi/mithril-giji
 @license 
**/
(function(){var t,o,i;o=function(t){return t.left=window.scrollX,t.top=window.scrollY},t=function(){var t,n,e,r;if(!i.scrolling)return t={},e=0,n=function(){var i;return i={},o(i),t.top===i.top&&t.left===i.left?10<e++:(t=i,e=0,!1)},(r=function(){n()?(i.scrolling=!1,i.do_event_list(i.on.scroll_end),i["do"].resize()):window.requestAnimationFrame(r)})()},module.exports=i={do_event_list:function(t,o){var i,n,e;if(0<t.length)for(n=0,e=t.length;e>n;n++)(i=t[n])(o)},"do":{resize:function(t){var o,n,e;return o=document.documentElement,e=Math.min(o.clientWidth,o.clientHeight),i.width=o.clientWidth,380>e&&(head.browser.viewport="width=device-width, maximum-scale=2.0, minimum-scale=0.5, initial-scale=0.5",null!=(n=document.querySelector("meta[name=viewport]"))&&(n.content=head.browser.viewport)),window.innerHeight>window.innerWidth?(i.landscape=!1,i.portlate=!0):(i.landscape=!0,i.portlate=!1),i.do_event_list(i.on.resize,t)},scroll_end:t,scroll:function(t){return o(i),i.height=window.innerHeight,i.right=i.left+window.innerWidth,i.bottom=i.top+i.height,i.horizon=i.height/2,i.scrolling||i.do_event_list(i.on.scroll_start,t),i["do"].scroll_end(),i.scrolling=!0,i.do_event_list(i.on.scroll,t)},orientation:function(t){return i.orientation=t,i.compass=t.webkitCompassHeading,i.do_event_list(i.on.orientation,t)},motion:function(t){return i.accel=t.acceleration,i.gravity=t.accelerationIncludingGravity,i.rotate=t.rotationRate,i.do_event_list(i.on.motion,t)},load:function(t){return i.do_event_list(i.on.load,t),i["do"].resize(),i["do"].scroll()}},on:{resize:[],scroll:[],scroll_start:[],scroll_end:[],orientation:[],motion:[],load:[]},top:0,horizon:0,bottom:0,left:0,right:0,height:0,width:0,scroll:null,accel:{},rotate:{},gravity:{},orientation:{},compass:0,is_tap:!1,deploy:function(){return"onorientationchange"in window?window.addEventListener("orientationchange",i["do"].scroll):window.addEventListener("resize",i["do"].scroll),window.addEventListener("scroll",i["do"].scroll),"ondeviceorientation"in window&&window.addEventListener("deviceorientation",i["do"].orientation),"ondevicemotion"in window&&window.addEventListener("devicemotion",i["do"].motion),"onhashchange"in window&&window.addEventListener("hashchange",function(t){return t.clipboardData?console.log(t):Url.popstate()}),"onpopstate"in window&&(window.addEventListener("popstate",function(t){return t.clipboardData?console.log(t):Url.popstate()}),head.browser.safari||Url.popstate()),"onmessage"in window&&window.addEventListener("message",function(t){return console.log("on message")}),"onoffline"in window&&window.addEventListener("offline",function(t){return console.log("on offline  onLine:"+navigator.onLine)}),"ononline"in window&&window.addEventListener("online",function(t){return console.log("on online  onLine:"+navigator.onLine)}),"onstorage"in window&&window.addEventListener("storage",function(t){return console.log("on storage")}),"onload"in window?window.addEventListener("load",i["do"].load):void 0}}}).call(this),function(){var t,o;t=function(){function t(o,i,n,e,r,s){this.box=o,this.dx=i,this.dy=n,this.absolute=null!=r?r:!1,this.duration=null!=s?s:DELAY.animato,this.box&&(this.absolute&&(this.duration/=4),t.list[this.box.id]=this,this.box.style.zIndex=e,this.mode="show",this.from=this.hide(),this.transform(this.from),this.transition())}var i;return t.list={},t.move=function(){var o,i,n,e;n=t.list,e=[];for(o in n)i=n[o],e.push(i.translate());return e},i=function(t){var i,n,e,r;return n=this.width||this.box.offsetWidth,i=this.height||this.box.offsetHeight,this.dx?e=this.dx:(this.width=this.box.parentElement.offsetWidth,e=this.box.parentElement.offsetLeft),this.dy&&(r=this.dy),t(e,r,n,i,{top:o.top,left:o.left,width:o.width,height:o.height})},t.prototype.show=function(){return i.call(this,function(t,o,i,n,e){return 0>t&&(t+=e.width-i),0>o&&(o+=e.height-n),{x:t,y:o,w:i,h:n,win:e}})},t.prototype.hide=function(){return i.call(this,function(t,o,i,n,e){return t=-t+function(){switch(!1){case!(t>0):return-i;case!(0>t):return e.width}}(),o=-o+function(){switch(!1){case!(o>0):return-n;case!(0>o):return e.height}}(),{x:t,y:o,w:i,h:n,win:e}})},t.prototype.transform=function(t){var i,n,e;return n=t.x,e=t.y,this.width&&(this.box.style.width=this.width+"px"),this.height&&(this.box.style.height=this.height+"px"),this.absolute?(this.box.style.position="absolute",this.box.style.left=n+o.left+"px",this.box.style.top=e+o.top+"px",this.box.style.webkitTransform="",this.box.style.mozTransform="",this.box.style.msTransform="",this.box.style.oTransform="",this.box.style.transform=""):(this.box.style.position="fixed",this.box.style.left=0,this.box.style.top=0,i="translate("+n+"px, "+e+"px)",this.box.style.webkitTransform=i,head.browser.ff&&(this.box.style.mozTransform=i),head.browser.ie&&(this.box.style.msTransform=i),head.browser.opera&&(this.box.style.oTransform=i),this.box.style.transform=i)},t.prototype.transition=function(){var t;return t=this.duration&&!this.absolute?"all "+this.duration+"ms ease-in-out 0":"",head.browser.ff&&(this.box.style.mozTransition=t),head.browser.ie&&(this.box.style.msTransition=t),head.browser.opera&&(this.box.style.oTransition=t),this.box.style.transition=t},t.prototype.translate=function(){var t;return t=this[this.mode](),_.isEqual(this.from,t)?void 0:(this.transform(t),setTimeout(function(o){return function(){return o.from=t,o.translate()}}(this),this.duration))},t}(),o=module.exports,o.on.scroll_end.push(t.move),o.on.resize.push(t.move)}.call(this),function(){var t,o;t=function(){function t(){this.show_upper=!0,this.size=30,this.head=this.tail=0}var i;return t.elems={},t.go=function(i,n){var e,r,s,l;return e=t.elems[i],e&&(s=e.getBoundingClientRect(),null==n&&(n=.5*Math.min(o.horizon,s.height)),l=s.top-o.horizon+n,r=0,r||l)?window.scrollBy(r,l):void 0},i=5e3,setInterval(function(){var t;return(null!=(t=o.scroll)?t.center:void 0)?o.scroll.tick(o.scroll.center,i/1e3):void 0},i),t.capture=function(){var i,n,e;return i=t.view(),e=o.scroll,null!=e&&null!=e.list&&(n=e.view(),n!==e.prop())?e.prop(n):void 0},t.view=function(){var i,n,e,r,s,l,a,h;a=null,s=t.elems;for(e in s)i=s[e],n=i.vision.id,r=i.getBoundingClientRect(),h=i.vision,h.top=r.top,h.btm=r.bottom,i.vision.id===e&&r.height&&r.width?!a&&h.top<(l=o.horizon)&&l<h.btm&&(a=n):delete t.elems[e];return a},t.prototype.rescroll=function(o){return this.prop=o,window.requestAnimationFrame(function(o){return function(){return t.go(o.prop())}}(this))},t.prototype.tick=function(t){return console.log(t)},t.prototype.view=function(){var i,n,e,r,s,l,a,h,d,u,c;for(a=this.pager_elem.getBoundingClientRect(),this.pager_top=a.top,h=this.list,r=n=0,s=h.length;s>n;r=++n)l=h[r],e=l._id,(i=t.elems[e])&&(c=i.vision,!this.adjust&&this.pager_top<(d=o.horizon)&&d<c.btm&&(c.offset=Math.max(1,o.horizon-c.top),this.adjust=c));return m.startComputation(),window.requestAnimationFrame(function(){return m.endComputation()}),null!=(u=this.adjust)?u.id:void 0},t.prototype.pager=function(t,i,n){var e,r,s,l,a,h,d,u,c,f,p,w,g,v;return this.list=i,(null!=(u=this.list)?u.length:void 0)?(w=0,r=this.list.length-1,null!=this.pager_elem&&(d=this.pager_elem.getBoundingClientRect(),c=o.height-d.bottom,p=0<d.top,f=c>0),s=_.findIndex(this.list,{_id:"function"==typeof this.prop?this.prop():void 0}),0>s&&(s=function(){if(this.past_list===this.list)switch(!1){case!p:return this.head;case!f:return this.tail;default:return this.head}else switch(!1){case!p:return w;case!f:return r;default:return w}}.call(this)),this.past_list=this.list,this.center=this.list[s],this.tail=Math.min(r,_.ceil(s+this.size,-1)),this.head=Math.max(w,s-this.size),h=function(t){return function(i,n,e){var r,s,l,a;return t.pager_elem=i,d=t.pager_elem.getBoundingClientRect(),t.show_under=d.bottom<o.horizon,t.show_upper=o.horizon<d.top,r=d.height/(1+t.tail-t.head),a=3*o.height/r,t.size<a&&console.log("!alert! scroll spy size "+t.size+" < "+a),l=d.bottom+o.top,s=l-t.elem_bottom,t.show_under&&s&&!t.prop()&&o.bottom<document.height&&window.scrollBy(0,s),t.elem_bottom=l}}(this),v=function(){var t,o,i,r,s;for(i=this.list.slice(this.head,+this.tail+1||9e9),s=[],t=0,o=i.length;o>t;t++){a=i[t],g=n(a),r=this.mark(a._id);for(l in r)e=r[l],g.attrs[l]=e;s.push(g)}return s}.call(this),m(t,{config:h},v)):m(t,{config:function(t){return function(o){t.pager_elem=o}}(this)})},t.prototype.mark=function(o){return{config:function(i){return function(n,e,r){var s;if(t.elems[o]=n,n.vision={id:o},i.adjust){if(o===i.adjust.id)return s=i.adjust.offset,i.adjust=null,t.go(o,s)}else if(!e&&o===i.prop())return window.requestAnimationFrame(function(){return t.go(o)})}}(this)}},t}(),o=module.exports,o.scroll=new t,o.on.scroll_end.push(function(){return t.capture()})}.call(this);