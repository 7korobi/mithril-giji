/**
 mithril-giji - mithril library for 人狼議事
 @version v0.0.8
 @link https://github.com/7korobi/mithril-giji
 @license 
**/
(function(){var t,n,i,e,o,r,s=[].slice;n=function(t,n,i,e,o){var r,s,l,a,u,c;for(null==o&&(o=Object.keys(e)),c=[],l=0,u=o.length;u>l;l++)a=o[l],s=e[a],r=t(n,i,a),c.push(m("span",r,s));return c},t=function(t,n,i,e,o){var r,s;return null==t["class"]&&(t["class"]="edge"),r=function(){return i(o)},s=n(e,o)?"btn "+t["class"]+" active":"btn "+t["class"],{className:s,onmouseup:r,ontouchend:r}},o=function(t){return t()},i=function(t,n){return n===t()},e=function(t,n){return t()[n]},r=function(t,n){var i;return i=pack.Keys,i(t())===i(n)},this.Btns={check:function(){return n.apply(null,[Btn.keys].concat(s.call(arguments)))},radio:function(){return n.apply(null,[Btn.set].concat(s.call(arguments)))},menu:function(){return n.apply(null,[Btn.menu].concat(s.call(arguments)))}},this.Btn={base:t,bool:function(n,i){return t(n,o,i,i,!i())},call:function(n,e){var o;return o=function(){return null},t(n,i,e,o,"call")},set:function(n,e,o){return t(n,i,e,e,o)},keys_reset:function(n,i,e){var o;return o=function(t){return r(i,e)?void 0:i(unpack.Keys(e))},t(n,r,o,i,e)},keys:function(n,i,o){var r;return r=function(t){var n;return n=i(),n[t]=!n[t],i(n)},t(n,e,r,i,o)},menu:function(n,e,o){var r;return r=function(t){return function(t){var n;return n=i(e,t)?"":t,e(n)}}(this),t(n,i,r,e,o)}}}).call(this),function(){var t,n;t={touch:head.browser.ios||head.browser.ff||head.browser.old&&head.browser.chrome?function(t,n){var i,e,o,r,s,l;return e=t.pageX,o=t.pageY,i=n.left,r=n.top,s=2*(e-i-window.scrollX),l=2*(o-r-window.scrollY),{x:s,y:l}}:function(t,n){var i,e,o,r,s,l;return e=t.pageX,o=t.pageY,i=n.left,r=n.top,s=2*(e-i),l=2*(o-r-window.scrollY),{x:s,y:l}},mouse:function(t){var n,i;return n=t.offsetX||t.layerX,i=t.offsetY||t.layerY,null!=n&&null!=i?(n*=2,i*=2,{x:n,y:i}):void 0},offsets:function(n,i,e){var o,r;if(e.offset=null,e.offsets=[],null!=n&&null!=i)if(null!=n.touches){if(o=i.getBoundingClientRect(),e.offsets=function(){var i,e,s,l;for(s=n.touches,l=[],i=0,e=s.length;e>i;i++)r=s[i],l.push(t.touch(r,o));return l}(),1===n.touches.length)return e.offset=e.offsets[0]}else if(e.offset=t.mouse(n),null!=e.offset)return e.offsets=[e.offset]},offset:function(n,i){var e;return null==n||null==i?null:null!=n.touches?(e=i.getBoundingClientRect(),t.touch(n.touches[0],e)):t.mouse(n)}},n=["config","data","background","draw","onmove"],this.Canvas={controller:function(i,e,o){var r,s,l,a,u,c,h,d,f,w,m,p,v,g,b,y,x,_;for(b=o.size,_=b[0],m=b[1],y=_+"x"+m,l=null,c=new e(o),p=0,v=n.length;v>p;p++)w=n[p],null==c[w]&&(c[w]=function(){});r={state:"boot",is_touch:!1,offsets:[],event:{}},a=function(t){return t.preventDefault(),r.event=t,c.onmove(r),d()},x=function(t){return r.state="onstart",r.is_touch=!0,a(t)},s=function(t){return r.state="oncancel",r.is_touch=!1,a(t)},f=function(t){return r.state="onend",r.is_touch=!1,a(t)},g=function(n){return r.state="onmove",t.offsets(n,l,r),r.event=n,a(n)},h=function(){var t,n,i;return t=r.ctx,n=c.data(),n&&(null==n.canvas&&(n.canvas={}),i=n.canvas[y])?void t.putImageData(i,0,0):(c.background(r),n?n.canvas[y]=t.getImageData(0,0,2*_,2*m):void 0)},d=function(){return h(),c.draw(r)},u=function(t,n,i){return r.ctx||(l=t,r.ctx=l.getContext("2d")),c.config(l,n,i),c.onmove(r),d()},this.canvas_attr={width:_,height:m,style:"width: "+_/2+"px; height: "+m/2+"px;",ontouchend:f,ontouchmove:g,ontouchstart:x,ontouchcancel:s,onmouseup:f,onmousemove:g,onmousedown:x,onmouseout:f,onmouseover:g,config:u}},view:function(t,n){return m("canvas"+n,t.canvas_attr)}}}.call(this),function(){}.call(this),function(){this.Layout=function(){function t(n,i,e,o,r,s){this.box=n,this.dx=i,this.dy=e,this.absolute=null!=r?r:!1,this.duration=null!=s?s:DELAY.animato,this.box&&(this.absolute&&(this.duration/=4),t.list[this.box.id]=this,this.box.style.zIndex=o,this.mode="show",this.from=this.hide(),this.transform(this.from),this.transition())}var n;return t.list={},t.move=function(){var n,i,e,o;e=t.list,o=[];for(n in e)i=e[n],o.push(i.translate());return o},n=function(t){var n,i,e,o;return i=this.width||this.box.offsetWidth,n=this.height||this.box.offsetHeight,this.dx?e=this.dx:(this.width=this.box.parentElement.offsetWidth,e=this.box.parentElement.offsetLeft),this.dy&&(o=this.dy),t(e,o,i,n,{top:win.top,left:win.left,width:win.width,height:win.height})},t.prototype.show=function(){return n.call(this,function(t,n,i,e,o){return 0>t&&(t+=o.width-i),0>n&&(n+=o.height-e),{x:t,y:n,w:i,h:e,win:o}})},t.prototype.hide=function(){return n.call(this,function(t,n,i,e,o){return t=-t+function(){switch(!1){case!(t>0):return-i;case!(0>t):return o.width}}(),n=-n+function(){switch(!1){case!(n>0):return-e;case!(0>n):return o.height}}(),{x:t,y:n,w:i,h:e,win:o}})},t.prototype.transform=function(t){var n,i,e;return i=t.x,e=t.y,this.width&&(this.box.style.width=this.width+"px"),this.height&&(this.box.style.height=this.height+"px"),this.absolute?(this.box.style.position="absolute",this.box.style.left=i+win.left+"px",this.box.style.top=e+win.top+"px",this.box.style.webkitTransform="",this.box.style.mozTransform="",this.box.style.msTransform="",this.box.style.oTransform="",this.box.style.transform=""):(this.box.style.position="fixed",this.box.style.left=0,this.box.style.top=0,n="translate("+i+"px, "+e+"px)",this.box.style.webkitTransform=n,head.browser.ff&&(this.box.style.mozTransform=n),head.browser.ie&&(this.box.style.msTransform=n),head.browser.opera&&(this.box.style.oTransform=n),this.box.style.transform=n)},t.prototype.transition=function(){var t;return t=this.duration&&!this.absolute?"all "+this.duration+"ms ease-in-out 0":"",head.browser.ff&&(this.box.style.mozTransition=t),head.browser.ie&&(this.box.style.msTransition=t),head.browser.opera&&(this.box.style.oTransition=t),this.box.style.transition=t},t.prototype.translate=function(){var t;return t=this[this.mode](),_.isEqual(this.from,t)?void 0:(this.transform(t),setTimeout(function(n){return function(){return n.from=t,n.translate()}}(this),this.duration))},t}()}.call(this),function(){this.ScrollSpy=function(){function t(t){this.prop=t,this.show_upper=!0,this.size=30,this.head=this.tail=0}var n;return t.elems={},t.go=function(n,i){var e,o,r,s;return e=t.elems[n],e&&(r=e.getBoundingClientRect(),null==i&&(i=.5*Math.min(win.horizon,r.height)),s=r.top-win.horizon+i,o=0,o||s)?window.scrollBy(o,s):void 0},n=5e3,window.setInterval(function(){var t;return(null!=(t=win.scroll)?t.center:void 0)?win.scroll.tick(win.scroll.center,n/1e3):void 0},n),t.capture=function(){var n,i,e;return n=t.view(),e=win.scroll,null!=e&&null!=e.list&&(i=e.view(),i!==e.prop())?e.prop(i):void 0},t.view=function(){var n,i,e,o,r,s,l,a;l=null,r=t.elems;for(e in r)n=r[e],i=n.vision.id,o=n.getBoundingClientRect(),a=n.vision,a.top=o.top,a.btm=o.bottom,n.vision.id===e&&o.height&&o.width?!l&&a.top<(s=win.horizon)&&s<a.btm&&(l=i):delete t.elems[e];return l},t.prototype.rescroll=function(n){return this.prop=n,window.requestAnimationFrame(function(n){return function(){return t.go(n.prop())}}(this))},t.prototype.tick=function(t){return console.log(t)},t.prototype.view=function(){var n,i,e,o,r,s,l,a,u,c,h;for(l=this.pager_elem.getBoundingClientRect(),this.pager_top=l.top,a=this.list,o=i=0,r=a.length;r>i;o=++i)s=a[o],e=s._id,(n=t.elems[e])&&(h=n.vision,!this.adjust&&this.pager_top<(u=win.horizon)&&u<h.btm&&(h.offset=Math.max(1,win.horizon-h.top),this.adjust=h));return m.startComputation(),window.requestAnimationFrame(function(){return m.endComputation()}),null!=(c=this.adjust)?c.id:void 0},t.prototype.pager=function(t,n,i){var e,o,r,s,l,a,u,c,h,d,f,w,p,v;return this.list=n,(null!=(c=this.list)?c.length:void 0)?(w=0,o=this.list.length-1,null!=this.pager_elem&&(u=this.pager_elem.getBoundingClientRect(),h=win.height-u.bottom,f=0<u.top,d=h>0),r=_.findIndex(this.list,{_id:"function"==typeof this.prop?this.prop():void 0}),0>r&&(r=function(){if(this.past_list===this.list)switch(!1){case!f:return this.head;case!d:return this.tail;default:return this.head}else switch(!1){case!f:return w;case!d:return o;default:return w}}.call(this)),this.past_list=this.list,this.center=this.list[r],this.tail=Math.min(o,_.ceil(r+this.size,-1)),this.head=Math.max(w,r-this.size),a=function(t){return function(n,i,e){var o,r,s,l;return t.pager_elem=n,u=t.pager_elem.getBoundingClientRect(),t.show_under=u.bottom<win.horizon,t.show_upper=win.horizon<u.top,o=u.height/(1+t.tail-t.head),l=3*win.height/o,t.size<l&&console.log("!alert! scroll spy size "+t.size+" < "+l),s=u.bottom+win.top,r=s-t.elem_bottom,t.show_under&&r&&!t.prop()&&win.bottom<document.height&&window.scrollBy(0,r),t.elem_bottom=s}}(this),v=function(){var t,n,o,r,a;for(o=this.list.slice(this.head,+this.tail+1||9e9),a=[],t=0,n=o.length;n>t;t++){l=o[t],p=i(l),r=this.mark(l._id);for(s in r)e=r[s],p.attrs[s]=e;a.push(p)}return a}.call(this),m(t,{config:a},v)):m(t,{config:function(t){return function(n){t.pager_elem=n}}(this)})},t.prototype.mark=function(n){return{config:function(i){return function(e,o,r){var s;if(t.elems[n]=e,e.vision={id:n},i.adjust){if(n===i.adjust.id)return s=i.adjust.offset,i.adjust=null,t.go(n,s)}else if(!o&&n===i.prop())return window.requestAnimationFrame(function(){return t.go(n)})}}(this)}},t}()}.call(this),function(){var t;t=document.createElement("div"),document.body.appendChild(t),t.style.display="none",this.Submit={get:function(t,n){var i,e,o,r;o="?";for(i in n)r=n[i],o+=i+"="+r;return e={method:"GET",url:t+encodeURI(o),deserialize:unpack.HtmlGon},m.request(e)},iframe:function(n,i){var e,o,r,s,l;return r=m.deferred(),o={action:encodeURI(n),method:"POST",target:"submit_result",config:function(t){return t.style.display="none",t.submit()}},e={name:"submit_result",config:function(t){var n;return n=setTimeout(function(){return r.reject(Error("form request time out."))},DELAY.largo),t.style.display="none",t.contentWindow.name="submit_result",t.onload=function(){var i,e;try{return clearTimeout(n),r.resolve(unpack.HtmlGon(t.contentDocument.body.innerHTML))}catch(e){return i=e,r.reject(i)}finally{m.endComputation()}}}},m.startComputation(),m.render(t,m("iframe",e),m("form#submit_request",o,function(){var t;t=[];for(s in i){if(l=i[s],null==l)break;t.push(m("input",{type:"hidden",name:s,value:l}))}return t}())),r.promise}}}.call(this),function(){var t,n;n=function(t){return t.left=window.scrollX,t.top=window.scrollY},t=function(){var t,i,e,o;if(!win.scrolling)return t={},e=0,i=function(){var i;return i={},n(i),t.top===i.top&&t.left===i.left?10<e++:(t=i,e=0,!1)},(o=function(){i()?(win.scrolling=!1,win.do_event_list(win.on.scroll_end),win["do"].resize()):window.requestAnimationFrame(o)})()},this.win={do_event_list:function(t,n){var i,e,o;if(0<t.length)for(e=0,o=t.length;o>e;e++)(i=t[e])(n)},"do":{resize:function(t){var n,i,e;return n=document.documentElement,e=Math.min(n.clientWidth,n.clientHeight),win.width=n.clientWidth,380>e&&(head.browser.viewport="width=device-width, maximum-scale=2.0, minimum-scale=0.5, initial-scale=0.5",null!=(i=document.querySelector("meta[name=viewport]"))&&(i.content=head.browser.viewport)),window.innerHeight>window.innerWidth?(win.landscape=!1,win.portlate=!0):(win.landscape=!0,win.portlate=!1),win.do_event_list(win.on.resize,t)},scroll_end:t,scroll:function(t){return n(win),win.height=window.innerHeight,win.right=win.left+window.innerWidth,win.bottom=win.top+win.height,win.horizon=win.height/2,win.scrolling||win.do_event_list(win.on.scroll_start,t),win["do"].scroll_end(),win.scrolling=!0,win.do_event_list(win.on.scroll,t)},orientation:function(t){return win.orientation=t,win.compass=t.webkitCompassHeading,win.do_event_list(win.on.orientation,t)},motion:function(t){return win.accel=t.acceleration,win.gravity=t.accelerationIncludingGravity,win.rotate=t.rotationRate,win.do_event_list(win.on.motion,t)},load:function(t){return win.do_event_list(win.on.load,t),win["do"].resize(),win["do"].scroll()}},on:{resize:[],scroll:[],scroll_start:[],scroll_end:[],orientation:[],motion:[],load:[]},top:0,horizon:0,bottom:0,left:0,right:0,height:0,width:0,scroll:null,accel:{},rotate:{},gravity:{},orientation:{},compass:0,is_tap:!1,deploy:function(){return"onorientationchange"in window?window.addEventListener("orientationchange",win["do"].scroll):window.addEventListener("resize",win["do"].scroll),window.addEventListener("scroll",win["do"].scroll),"ondeviceorientation"in window&&window.addEventListener("deviceorientation",win["do"].orientation),"ondevicemotion"in window&&window.addEventListener("devicemotion",win["do"].motion),"onhashchange"in window&&window.addEventListener("hashchange",function(t){return t.clipboardData?console.log(t):Url.popstate()}),"onpopstate"in window&&(window.addEventListener("popstate",function(t){return t.clipboardData?console.log(t):Url.popstate()}),head.browser.safari||Url.popstate()),"onmessage"in window&&window.addEventListener("message",function(t){return console.log("on message")}),"onoffline"in window&&window.addEventListener("offline",function(t){return console.log("on offline  onLine:"+navigator.onLine)}),"ononline"in window&&window.addEventListener("online",function(t){return console.log("on online  onLine:"+navigator.onLine)}),"onstorage"in window&&window.addEventListener("storage",function(t){return console.log("on storage")}),"onload"in window?window.addEventListener("load",win["do"].load):void 0}}}.call(this);